{% extends "ticketing/base_page.html" %}
{% load static %}

{% block title %}
    بلیت‌های من
{% endblock %}

{% block toolbar_title %}
    <h4 class="fw-bold mb-0">
        <i class="fas fa-list-alt me-2"></i>
        فهرست بلیت‌های خریداری‌شده
    </h4>
{% endblock %}

{% block main_content %}
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 py-4">
        {% if tickets %}
            {% for ticket in tickets %}
                <div class="col">
                    <div class="card h-100 shadow-sm ticket-card">
                        <a href="{% url "ticketing:ticket_details" ticket_id=ticket.id %}" class="text-decoration-none text-dark">
                            <div class="card-body">
                                <h5 class="card-title fw-bold text-primary mb-1">
                                    <i class="fas fa-film me-2"></i>
                                    {{ ticket.showtime.movie.name }}
                                </h5>
                                <p class="card-subtitle text-muted mb-3">
                                    <i class="fas fa-building me-2"></i>
                                    {{ ticket.showtime.cinema.name }}
                                </p>
                                <hr>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="small text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        شروع سانس:
                                    </span>
                                    <span class="fw-bold">{{ ticket.showtime.start_time|date:"l Y/n/j ساعت H:i" }}</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="small text-muted">
                                        <i class="fas fa-chair me-1"></i>
                                        تعداد صندلی:
                                    </span>
                                    <span class="fw-bold">{{ ticket.seat_count }}</span>
                                </div>
                            </div>
                        </a>
                        <div class="card-footer bg-white text-center border-0 pt-0">
                            <a href="{% url "ticketing:ticket_details" ticket_id=ticket.id %}" class="btn btn-primary btn-sm rounded-pill w-100">
                                مشاهده جزئیات بلیت
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12">
                <div class="alert alert-danger text-center shadow-sm" role="alert">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    شما هنوز هیچ بلیتی خریدای نکردید.
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}